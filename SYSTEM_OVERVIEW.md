# Room Panel Offline Demo — System Overview

- Назначение: офлайн‑панель бронирования для одной переговорной/ресурса. Работает без сети на Android/ПК (киоск‑браузер или APK).
- Основано на идеях BOOCO Room Panel/Reception (см. сайт/вики в `QUICK_RETURN.md`).

## Архитектура
- Клиент: статический сайт `offline-panel/` — `index.html`, `app.css`, `app.js`.
- Данные: IndexedDB с fallback на localStorage.
- Офлайн: экспорт/импорт JSON, без внешних запросов.
- Время: везде 24‑часовой формат `HH:MM`; внутренняя логика работает в минутах от полуночи.
  - Ограничения по рабочим часам сняты: бронирование разрешено в пределах суток.

## NFC (план демо-авторизации)
- Быстрый путь без APK: использовать Fully Kiosk Browser Pro на Android с включённой поддержкой NFC.
- Поток (минимум для демо):
  1) При поднесении метки браузер передаёт UID в страницу → JS ловит событие
  2) Ищем UID в локальной IndexedDB таблице `users` {id, name, tagUid}
  3) При успешном сопоставлении: даём доступ к действиям (начать/отменить/завершить), показываем имя, даём звук/тост
  4) При неуспехе: показываем «Метка не зарегистрирована»
- Ограничения демо: UID многих карт клонируем; для повышенной защиты — переход к APK (Capacitor + NFC-плагин, NDEF/подпись) в будущем.
- См. шаги в `QUICK_RETURN.md` (раздел NFC демо) и TODO в `docs/FEATURES.md`.
 - Контекст/память: ведём заметки сессии в `MCP_MEMORY.md`; в будущем — подключим MCP server `memory` для автоматического восстановления контекста и заметок между сессиями (см. QUICK_RETURN.md).

## Цепочка входа
1. Прочитай этот файл.
2. Открой `QUICK_RETURN.md` — краткая навигация/команды.
3. Деплой см. `DEPLOYMENT.md`.
4. Если доступен MCP server `memory`, синхронизируй заметки сессии туда (см. раздел в `QUICK_RETURN.md`).

## Роли ключевых файлов
- `offline-panel/index.html` — разметка и диалоги.
- `offline-panel/app.css` — визуальный стиль для презентаций.
- `offline-panel/app.js` — логика бронирований/валидаций/экспорт.
   - Маска ввода времени (мягкая), парсинг только `HH:MM`, округления к 15 минутам.
   - Выбор дня (кнопка «Выбрать день»), быстрая подстановка доступных начал, подсветка поля «Начало».
   - Sticky‑заголовок «Брони на день», скролл только списка (мобильный friendly).
   - Удалён блок «Оконченные» — прошедшие встречи скрываются.
   - Автовозврат на сегодняшний день через 15 секунд бездействия при просмотре/создании брони в другом дне.
- `SETTINGS_ARCHITECTURE.md` — локальные настройки.
- `docs/adr/` — ADR (решения) и индекс.
 - `docs/FEATURES.md` — функциональность и дорожная карта (что есть/что будет).

## Чеклист перед демо
- [ ] Слоты создаются/удаляются, без пересечений
- [ ] Статус «Свободна/Занята» корректен, показывается «до/следующая»
- [ ] Экспорт/импорт JSON работает
- [ ] Быстрые 15/30/60 без ошибок
- [ ] Полноэкранный режим; курсор/системные панели скрыты (на панели)

## MCP memory (интеграция)
- Сервер MCP `memory` используется для сохранения контекста проекта, бэклога и ссылок.
- Основные сущности: `room-panel-offline` (project), `room-panel-offline-backlog` (backlog).
- При старте сессии: запроси их из MCP `memory` и обнови бэклог/план.
